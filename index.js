// —Ç–æ–∫–µ–Ω –±–µ—Ä–µ–º —Å .env —Ñ–∞–π–ª–∞
require('dotenv').config()
const token = process.env.BOT_TOKEN
// –±–µ—Ä–µ–º –∞–ø–∏—à–∫—É
const TelegramApi = require('node-telegram-bot-api')

// —Å–æ–∑–¥–∞–µ–º –±–æ—Ç–∞, –¥–µ–ª–∞—è –µ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã(—Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ—á–∞—è —Ö—É–π–Ω—è –∫–∞—Ä–æ—á–µ —Å—ã—Ä –∑–∞–ª—É–ø–∞)
const bot = new TelegramApi(token, {polling: true})


// —Ç—É—Ç –∫–æ—Ä–æ—á —Ç–µ–º–∫–∞ —à–æ–± –∫–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞–ª –∫–Ω–æ–ø–∫—É –≤–æ–∑–ª–µ —á–∞—Ç–∞ –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø —É–¥–æ–±–Ω–æ –∫–æ—Ä–æ—á
bot.setMyCommands([
    {command: '/start', description: '–Ω–∞—á–∞–ª–æ'},
    {command: '/account', description: '–º–æ–π –∞–∫–∫–∞—É–Ω—Ç'}
])
console.log('bot running...')

const start = () => {
    bot.on('message', async msg => {
        // —Å–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∫ –Ω–∏–º –≥—Ä—É–±–æ –≥–æ–≤–æ—Ä—è –∫–æ—Ä–æ—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —à–æ–±—ã –∫—Ä–∞—Å–∏–≤–æ –≤—Å–µ —Å–º–æ—Ä–µ–ª–æ—Å—å –Ω–µ —Å—ã—Ä–Ω–æ
        const chatId = msg.chat.id
        const text = msg.text
        // –±–∞–ª–∏–∫ –∏ —Ç–æ—Ç —Å–∞–º—ã–π –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
        let balance = 0;
        let whitelist = false;

        // —Ç—É—Ç –ø–æ–Ω—è—Ç–Ω–æ —è –¥—É–º–∞—é
        if (text === '/start') {
            bot.sendSticker(chatId, 'https://tlgrm.ru/_/stickers/76b/596/76b59687-4b1f-383f-80e1-8289192f8bb2/12.webp')
            bot.sendMessage(chatId, 'üßÄ –∑–¥–∞—Ä–æ–≤–∞ üßÄ, —Ö–æ—á–µ—à—å –∫–æ–º—É —Ç–æ –Ω–∞–µ–±–∞—à–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –≥—É–¥–∫–∞–º–∏ –∏–ª–∏ —Å–º—Å–∫–∞–º–∏, —Ç–µ–±–µ –∫ –Ω–∞–º! \n\n –°–Ω–∏–∑—É —É–≤–∏–¥–∏—à—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –µ–±–∞–Ω–æ–≥–æ –±–æ—Ç–∞')
        }

        // —Ç—É—Ç –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å—Ä–∞–∑—É 2 —Å–≤—è–∑–∞—Ç—å —ç—Ç–æ –±–∞–ª–∏–∫ –∏ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–æ—á –ø–æ–Ω—è—Ç–Ω–æ –Ω–∞—Ö—É–π —è –ø–∏—à—É —ç—Ç–æ
        if (text === '/account') {
            bot.sendMessage(chatId, `üè¶ –¢–≤–æ–π –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç , ${msg.from.first_name}üßÄ \n\n üí≥–±–∞–ª–∞–Ω—Å: ${balance}‚ÇΩ \n üìÑ–≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ: ${whitelist ? '–¥–∞üîí' : '–Ω–µ—Çüîì'}`)
        }
    })

}

// –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é
start()
// —à–æ–± –Ω–∞—Ö–æ–¥–∏–ª–æ —Å—ã—Ä–Ω—ã–µ –æ—à—ã–±–∫–∏
bot.on('polling_error', console.error)